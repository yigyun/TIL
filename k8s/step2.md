# 쿠버네티스(Kubernetes)

쿠버네티스는 컨테이너화된 애플리케이션이 안정적으로 실행되도록 관리하고 조정하는 역할을 함. 인프라 설정에 대한 세부 사항 없이 애플리케이션 배포 및 운영에 필요한 모든 것을 관리함.

## 클러스터 설정 및 관리

### 클러스터 생성 방법
쿠버네티스 클러스터는 수동 설정, **EKS (Amazon Elastic Kubernetes Service)**, **Kubermatic** 등을 통해 생성할 수 있음.

### kubectl
**kubectl**은 클러스터와 상호작용하며, 배포 및 리소스 설정을 변경하는 데 사용되는 커맨드라인 도구임.

### Minikube
**Minikube**는 로컬 환경에서 쿠버네티스를 테스트하고 학습할 수 있도록 제공되는 경량 클러스터임.

### 설치 및 설정
- [kubectl 설치 가이드](https://kubernetes.io/docs/tasks/tools/install-kubectl-windows/#install-nonstandard-package-tools)
- Windows에서 설치 예시:
  ```bash
  choco install kubernetes-cli
  kubectl version --client

## Minikube 설정
Minikube가 사용할 가상 머신 환경을 위해 **VirtualBox** 설치가 필요함.

# 대시보드 (Dashboard)
쿠버네티스 대시보드는 클러스터 리소스 상태를 시각적으로 확인하고, Pod 상태, 노드 상태 등을 조회할 수 있는 웹 기반 인터페이스를 제공함.

---

# 쿠버네티스의 내부 동작

쿠버네티스는 **객체(Object)**들을 통해 클러스터를 구성하고 관리함. 객체는 애플리케이션의 배포, 확장, 네트워킹, 스토리지를 담당하는 핵심 구성 요소임.

## 주요 객체
- **Deployments**: Pod의 수, 컨테이너 수, 배포 상태를 관리함.
- **Pods**: 하나 이상의 컨테이너를 포함한 쿠버네티스의 가장 작은 배포 단위임.
- **Services**: Pod 간 또는 클러스터 외부와의 통신을 담당함.
- **Volumes**: Pod에 영구적인 스토리지를 제공함.

## 객체 생성 방식
- **명령적 방식**: 명령어를 통해 즉시 객체를 생성함.
- **선언적 방식**: YAML 파일로 정의된 상태를 사용해 객체를 생성함.

## Pod
- **Pod**는 쿠버네티스의 가장 작은 단위이며, 하나 이상의 컨테이너로 구성됨.
- Pod 내의 컨테이너들은 `localhost`로 통신 가능하며, Pod는 클러스터 내부 IP로 다른 Pod와 연결됨.
- Pod는 임시적 특성을 가지며, 삭제되면 기본적으로 관련 리소스도 함께 삭제됨.

## Deployment
- **Deployment**는 Pod 수와 같은 배포 지침을 제공하는 객체로, 이를 통해 안정적인 애플리케이션 배포를 보장함.
- Deployment는 **컨트롤러 객체**를 통해 자동으로 리소스를 관리함.
- 일시 중지, 삭제, 롤백, 스케일링이 가능하며, 수신 트래픽과 CPU 사용률을 기반으로 **오토스케일링** 기능을 지원함.

---

# 애플리케이션 배포 과정

1. **컨테이너 이미지 생성**: 애플리케이션을 도커로 빌드하여 이미지를 생성함.
2. **클러스터 실행 확인**: 클러스터가 실행 중인지 확인하고 이미지를 배포할 준비를 함.
3. **Deployment 생성**: `kubectl` 명령어를 사용해 Deployment 객체를 생성
   ```bash
   kubectl create deployment <이름> --image=<이미지이름>

## 상태 조회
배포된 **Deployment**와 **Pod** 상태를 조회할 수 있음.

    ```bash
    kubectl get deployments
    kubectl get pods

## 이미지 위치
쿠버네티스 클러스터에서 이미지를 실행하려면, 클러스터가 해당 이미지에 접근할 수 있는 위치에 저장되어 있어야 함.

---

이와 같이 쿠버네티스는 컨테이너화된 애플리케이션을 효율적으로 관리하고, 배포와 확장을 지원함. 클러스터와 다양한 객체들의 상호작용을 통해 강력한 컨테이너 오케스트레이션을 가능하게 함.
