# 쿠버네티스(K8s)란?

쿠버네티스는 컨테이너화된 애플리케이션의 **배포, 확장, 관리**를 자동화하는 오픈 소스 시스템임. 개발, 테스트, 배포 환경에서 컨테이너를 쉽게 사용할 수 있도록 해주는 강력한 플랫폼임.  
컨테이너 기반 애플리케이션의 운영에서 자주 직면하는 문제를 해결함.

## 수동 배포의 문제점

도커로 컨테이너를 개별 배포할 때 발생할 수 있는 몇 가지 문제:

- **컨테이너 충돌**: 하나의 컨테이너가 충돌하거나 다운되면 새로운 컨테이너로 교체해야 하는데, 이 과정이 자동화되지 않으면 관리 부담이 커질 수 있음.
- **자동 확장(Auto Scaling)**: 트래픽 증가 시 컨테이너 수를 동적으로 조절할 수 있어야 하지만, 수동으로 확장하면 빠르게 대처하기 어려움.
- **로드 밸런싱**: 트래픽을 각 컨테이너에 고르게 분배하는 것도 수동으로 하긴 까다로움.
- **클라우드 종속성**: AWS, Azure, Google Cloud 같은 특정 클라우드 서비스에 종속되면 유연한 배포 전략을 가지기 어려움.

## 쿠버네티스의 목표와 기능

쿠버네티스는 **배포 표준화**를 통해 다양한 환경에서 동일하게 작동하도록 지원함. 클라우드 프로바이더와 상관없이 동일한 구성 파일을 이용할 수 있어 이식성이 뛰어남.  
쿠버네티스는 도커나 AWS의 대안이 아닌, **컨테이너 오케스트레이션 툴**로 도커와 함께 동작함. 여러 컨테이너와 다양한 머신을 하나의 클러스터로 묶어 쉽게 관리할 수 있는 일종의 도커 컴포즈의 확장판으로 생각할 수 있음.

---

# 쿠버네티스 배포 아키텍처

쿠버네티스는 여러 구성 요소가 협력해 클러스터를 형성하고, 이 클러스터를 통해 애플리케이션을 안정적으로 운영하도록 함.

## 주요 구성 요소

- **Pod**: 쿠버네티스에서 가장 작은 배포 단위로, 하나 이상의 애플리케이션 컨테이너를 포함함. 컨테이너의 네트워킹과 스토리지 환경을 설정하는 역할도 담당함. 일반적으로 **하나의 Pod에는 하나의 애플리케이션 컨테이너**가 포함되지만, 일부 상황에서는 여러 컨테이너가 같은 Pod 내에서 협력하여 작동하기도 함.
- **노드(Node)**: Pod를 호스팅하는 서버로, 물리적 머신 또는 가상 머신일 수 있음. 쿠버네티스 클러스터는 여러 노드로 구성되며, 노드는 **워커 노드**와 **마스터 노드**로 나뉨.
    - **워커 노드**: Pod가 실제로 실행되는 노드로, 클러스터 내 여러 워커 노드가 애플리케이션 트래픽을 분산해 처리함. 워커 노드에는 **kubelet**과 **kube-proxy**가 설치되어 Pod와 네트워크 트래픽을 관리함.
    - **마스터 노드**: 컨트롤 역할을 하는 노드로, 클러스터 전체의 상태를 관리하고 워커 노드에 배포할 Pod와 관련된 지시를 내림. 주요 컴포넌트로 **API 서버**, **스케줄러**, **컨트롤러 매니저** 등이 있음.
        - **API 서버**: 클러스터와 외부 애플리케이션이 통신할 수 있도록 하는 인터페이스 역할을 함.
        - **스케줄러**: 각 Pod가 실행될 노드를 선택하는 컴포넌트로, 리소스 사용 상태에 따라 최적의 배치 전략을 결정함.
        - **컨트롤러 매니저**: 클러스터 내 상태가 정의된 대로 유지되도록 조정하고, 장애 발생 시 복구 절차를 관리함.

## 클러스터 구조

쿠버네티스는 다양한 노드가 모여 하나의 클러스터를 구성함.

- **클러스터**: 여러 마스터와 워커 노드가 모여 클러스터를 형성하며, 클러스터는 노드들의 리소스를 하나의 단일 시스템처럼 동작하게 만듦. 이 클러스터는 클라우드 API와 상호작용하며, 필요한 리소스를 생성하고 조절함.
- **kubelet**: 각 워커 노드에 설치된 에이전트로, 마스터 노드와 통신해 Pod 실행을 제어하고 상태를 모니터링함.
- **kube-proxy**: 각 워커 노드의 네트워크 프록시 역할을 하며, 네트워크 규칙을 설정해 Pod 간 통신 및 외부 트래픽을 관리함. 로드 밸런싱을 통해 Pod에 균등하게 트래픽을 분배함.

---

이렇게 주요 구성 요소와 역할을 통해 쿠버네티스가 어떤 방식으로 컨테이너를 관리하는지 알 수 있음. 
